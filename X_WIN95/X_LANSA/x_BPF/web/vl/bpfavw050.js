LANSA.addComponent({id:"BPFAVW050",nm:"BPFUserAccountEditView",ot:"wv",tp:"View",pt:"ap",de:"Portal User Account Edit View",tl:15000300},function(l,oI,u){var cO=l.rC(oI,{an:"PRIM_VIEW",mt:{SetStrings:{},Populate:{},HandleCheckEmail:{},HandleAccountExists:{ps:{"Exists":{pt:"i"}}},CheckDataIsValid:{},ClearAllErrors:{}},co:function(){cO.aN.call(this);var C0=this.cA("SESSION","BPFAPP002");var C1=this.cA("NAVIGATE","BPFAPP001");var C2=this.cR("STRINGS","BPFVLR050");var C3=this.cR("ROUNDEDCORNERSTYLE","PRIM_VS","Style");
var C4=this.cR("NAVIGATIONLINKSTYLE","PRIM_VS","Style");var C5=this.cR("MAINLAYOUT","PRIM_TBLO");var C6=this.cR("LAYOUTCOLUMN1","PRIM_TBLO","Column");var C7=this.cR("LAYOUTCOLUMN2","PRIM_TBLO","Column");var C8=this.cR("LAYOUTCOLUMN3","PRIM_TBLO","Column");var C9=this.cR("LAYOUTCOLUMN4","PRIM_TBLO","Column");var C10=this.cR("LAYOUTCOLUMN5","PRIM_TBLO","Column");var C11=this.cR("LAYOUTROW1","PRIM_TBLO","Row");var C12=this.cR("MAINLAYOUTROW1","PRIM_TBLO","Row");var C13=this.cR("MAINLAYOUTITEM1","PRIM_TBLO","Item");
var C14=this.cR("MAINLAYOUTITEM2","PRIM_TBLO","Item");var C15=this.cR("MAINLAYOUTITEM3","PRIM_TBLO","Item");var C16=this.cR("MAINLAYOUTITEM4","PRIM_TBLO","Item");var C17=this.cR("ACCOUNTENTRYPANELLAYOUT","PRIM_TBLO");var C18=this.cR("ACCOUNTENTRYPANELLAYOUTROW1","PRIM_TBLO","Row");var C19=this.cR("ACCOUNTENTRYPANELLAYOUTROW2","PRIM_TBLO","Row");var C20=this.cR("ACCOUNTENTRYPANELLAYOUTCOLUMN1","PRIM_TBLO","Column");var C21=this.cR("ACCOUNTPANELLAYOUTCOLUMN2","PRIM_TBLO","Column");var C22=this.cR("ACCOUNTPANELLAYOUTCOLUMN3","PRIM_TBLO","Column");
var C23=this.cR("ACCOUNTPANELLAYOUTITEM1","PRIM_TBLO","Item");var C24=this.cR("ACCOUNTPANELLAYOUTITEM3","PRIM_TBLO","Item");var C25=this.cR("ACCOUNTPANELLAYOUTITEM4","PRIM_TBLO","Item");var C26=this.cR("ACCOUNTPANELLAYOUTITEM5","PRIM_TBLO","Item");var C27=this.cR("ACCOUNTPANELLAYOUTITEM2","PRIM_TBLO","Item");var C28=this.cR("ACCOUNTPANELLAYOUTITEM11","PRIM_TBLO","Item");var C29=this.cR("PANELHEADING","PRIM_MD","Label");var C30=this.cR("INSTRUCTIONTEXT","PRIM_MD","Label");var C31=this.cR("ACCOUNTDETAILSENTRYPANEL","PRIM_PANL");
var C32=this.cR("ACCOUNTDETAILSPANELHEADING","PRIM_MD","Label");var C33=this.cR("FIRSTNAMEEDIT","PRIM_MD","Edit");var C34=this.cR("USEREMAILEDIT","PRIM_MD","Edit");var C35=this.cR("LASTNAMEEDIT","PRIM_MD","Edit");var C36=this.cR("DIVIDER","PRIM_PANL");var C37=this.cR("SAVEACTION","PRIM_MD","FlatButton");var C38=this.cR("BOTTOMMARGIN","PRIM_MD","Label");var C39=this.cR("ACCOUNTINUSE","PRIM_BOLN");var C40=this.cR("ACCOUNTCHECKDELAY","PRIM_TIMR");this.cD("CURRENTUSER");if((C0!=null)&&(C0.iI()==false))
{C0.iC();}if((C1!=null)&&(C1.iI()==false)){C1.iC();}C2.iC();C3.setCornerBottomLeft(8);C3.setCornerBottomRight(8);C3.setCornerTopLeft(8);C3.setCornerTopRight(8);C3.setBorderLeft(1);C3.setBorderTop(1);C3.setBorderRight(1);C3.setBorderBottom(1);C3.iC();C4.setCursor("HAND");C4.iC();C5.setMarginTop(24);C5.iC();C6.setDisplayPosition(1);C6.setParent(C5);C6.setMinWidth(8);C6.iC();C7.setDisplayPosition(2);C7.setParent(C5);C7.setMaxWidth(60);C7.iC();C8.setDisplayPosition(3);C8.setParent(C5);C8.setWidth(96);
C8.setMinWidth(280);C8.setMaxWidth(880);C8.iC();C9.setDisplayPosition(4);C9.setParent(C5);C9.setMaxWidth(60);C9.iC();C10.setDisplayPosition(5);C10.setParent(C5);C10.setMinWidth(8);C10.iC();C11.setDisplayPosition(1);C11.setParent(C5);C11.setHeight(76);C11.setUnits("CONTENT");C11.iC();C12.setDisplayPosition(2);C12.setParent(C5);C12.setHeight(419);C12.setUnits("CONTENT");C12.iC();C13.setAlignment("TOPLEFT");C13.setColumn(C7);C13.setManage(C29);C13.setParent(C5);C13.setRow(C11);C13.setSizing("CONTENTHEIGHTFITTOWIDTH");
C13.setFlow("DOWN");C13.setColumnSpan(3);C13.iC();C14.setAlignment("TOPLEFT");C14.setColumn(C7);C14.setManage(C30);C14.setParent(C5);C14.setRow(C11);C14.setSizing("CONTENTHEIGHTFITTOWIDTH");C14.setFlow("DOWN");C14.setMarginTop(24);C14.setColumnSpan(3);C14.iC();C15.setAlignment("TOPLEFT");C15.setColumn(C8);C15.setManage(C31);C15.setParent(C5);C15.setRow(C12);C15.setSizing("FITTOWIDTH");C15.setFlow("DOWN");C15.setMarginTop(24);C15.iC();C16.setAlignment("TOPLEFT");C16.setColumn(C8);C16.setFlow("DOWN");
C16.setManage(C38);C16.setParent(C5);C16.setRow(C12);C16.setSizing("FITTOWIDTH");C16.iC();C17.setSizing("CONTENTHEIGHT");C17.iC();C18.setDisplayPosition(1);C18.setParent(C17);C18.setUnits("CONTENT");C18.setHeight(313);C18.iC();C19.setDisplayPosition(2);C19.setParent(C17);C19.setUnits("PIXELS");C19.setHeight(56);C19.iC();C20.setDisplayPosition(1);C20.setParent(C17);C20.setMinWidth(24);C20.iC();C21.setDisplayPosition(2);C21.setParent(C17);C21.setWidth(98);C21.iC();C22.setDisplayPosition(3);C22.setParent(C17);
C22.setMinWidth(24);C22.iC();C23.setManage(C32);C23.setParent(C17);C23.setRow(C18);C23.setSizing("CONTENTHEIGHTFITTOWIDTH");C23.setColumn(C21);C23.setAlignment("TOPLEFT");C23.setFlow("DOWN");C23.setMarginTop(24);C23.setMarginBottom(16);C23.iC();C24.setColumn(C20);C24.setManage(C36);C24.setParent(C17);C24.setSizing("FITTOWIDTH");C24.setRow(C19);C24.setAlignment("TOPLEFT");C24.setColumnSpan(3);C24.iC();C25.setAlignment("CENTERRIGHT");C25.setColumn(C21);C25.setManage(C37);C25.setParent(C17);C25.setRow(C19);
C25.setSizing("NONE");C25.iC();C26.setAlignment("TOPLEFT");C26.setColumn(C21);C26.setManage(C33);C26.setParent(C17);C26.setRow(C18);C26.setSizing("FITTOWIDTH");C26.setFlow("DOWN");C26.setMarginTop(8);C26.iC();C27.setAlignment("TOPLEFT");C27.setColumn(C21);C27.setManage(C34);C27.setParent(C17);C27.setRow(C18);C27.setSizing("FITTOWIDTH");C27.setFlow("DOWN");C27.setMarginTop(8);C27.iC();C28.setAlignment("TOPLEFT");C28.setColumn(C21);C28.setManage(C35);C28.setParent(C17);C28.setRow(C18);C28.setSizing("FITTOWIDTH");
C28.setFlow("DOWN");C28.setMarginTop(8);C28.iC();C29.setDisplayPosition(1);C29.setLeft(350);C29.setParent(this);C29.setTabPosition(1);C29.setThemeDrawStyle("Heading1");C29.setTop(24);C29.setWidth(1000);C29.setIcon("arrow_back");C29.setCaptionMarginLeft(24);C29.setHeight(31);C29.setWordWrap(true);C29.setCaption("Edit Account");C29.setStyle(C4);C29.iC();C30.setCaptionAlignment("TOPLEFT");C30.setDisplayPosition(2);C30.setHeight(21);C30.setLeft(350);C30.setParent(this);C30.setTabPosition(2);C30.setTop(79);
C30.setWidth(1000);C30.setWordWrap(true);C30.setCaption("Enter the information about you that we will use to communicate with you. You are the only one who is able to change this information.");C30.iC();C31.setDisplayPosition(3);C31.setHeight(371);C31.setLeft(410);C31.setParent(this);C31.setTabPosition(3);C31.setTabStop(false);C31.setTop(124);C31.setWidth(880);C31.setThemeDrawStyle("Card");C31.setStyle(C3);C31.setLayoutManager(C17);C31.iC();C32.setCaption("Your Account");C32.setDisplayPosition(1);
C32.setLeft(24);C32.setParent(C31);C32.setTabPosition(1);C32.setThemeDrawStyle("Heading3");C32.setTop(24);C32.setWidth(830);C32.setWordWrap(true);C32.setHeight(24);C32.iC();C33.setCaption("First name");C33.setDisplayPosition(3);C33.setLeft(24);C33.setParent(C31);C33.setTabPosition(3);C33.setTop(155);C33.setWidth(830);C33.iC();C34.setCaption("Email");C34.setDisplayPosition(2);C34.setLeft(24);C34.setParent(C31);C34.setTabPosition(2);C34.setTop(72);C34.setWidth(830);C34.iC();C35.setCaption("Last name");
C35.setDisplayPosition(4);C35.setLeft(24);C35.setParent(C31);C35.setTabPosition(5);C35.setTop(238);C35.setWidth(830);C35.iC();C36.setDisplayPosition(6);C36.setHeight(8);C36.setLeft(0);C36.setParent(C31);C36.setTabPosition(4);C36.setTabStop(false);C36.setThemeDrawStyle("TopDivider");C36.setTop(313);C36.setWidth(878);C36.iC();C37.setCaption("SAVE");C37.setDisplayPosition(5);C37.setLeft(754);C37.setParent(C31);C37.setTabPosition(6);C37.setThemeDrawStyle("ForegroundMediumPrimary");C37.setTop(323);C37.setStyle(C4);
C37.iC();C38.setDisplayPosition(4);C38.setLeft(410);C38.setParent(this);C38.setTabPosition(4);C38.setTop(495);C38.setHeight(24);C38.setWidth(880);C38.iC();C39.iC();C40.setInterval(250);C40.setStartup("MANUAL");C40.iC();C0.aH("ONCHECKACCOUNTCOMPLETED",this,e3);C0.aH("ONCHECKACCOUNTFAILED",this,e4);C29.aH("CLICK",this,e2);C34.aH("CHANGED",this,e8);C37.aH("CLICK",this,e7);C40.aH("TICK",this,e9);this.setDisplayPosition(1);this.setTabPosition(1);this.setWidth(1700);this.setHeight(800);this.setLayoutManager(C5);
this.setVerticalScroll(true);this.aH("INITIALIZE",this,e1);}});function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#COM_OWNER.Initialize",79);r.ln=79;{r.ln=82;this.setrefCURRENTUSER(m.SESSION.ref.getCURRENTUSER());r.ln=85;this.mthSETSTRINGS();r.ln=87;this.mthPOPULATE();r.ln=88;l.gW("BPFPORTAL").getVIEWSPANEL().mthSETWAITINGSTATE("OFF");}r.ln=90;r.e();};function e2(sender,Ps){var r=l.eR(this,cO,"#PanelHeading.Click",93);r.ln=93;{r.ln=95;l.WEB().getHistory().mthGOBACK(u);}r.ln=97;r.e();};function e3(sender,Ps)
{var r=l.eR(this,cO,"#Session.OnCheckAccountCompleted",100);var P0=Ps.r("ACCOUNTEXISTS");r.ln=100;{r.ln=102;this.mthHANDLEACCOUNTEXISTS(P0.get());}r.ln=104;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Session.OnCheckAccountFailed",106);r.ln=106;{r.ln=108;l.gW("BPFPORTAL").mthSHOWTOASTER(m.STRINGS.getTEXT("MESSAGE.ONCHECKACCOUNTFAILED"));}r.ln=110;r.e();};function e5(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#CurrentUser.OnSetAccountDetailsCompleted",112);r.ln=112;{r.ln=114;l.WEB().getHistory().mthGOBACK(u);
r.ln=115;l.gW("BPFPORTAL").mthSHOWTOASTER(m.STRINGS.getTEXT("MESSAGE.ONSETACCOUNTDETAILSCOMPLETED"));}r.ln=117;r.e();};function e6(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#CurrentUser.OnSetAccountDetailsFailed",119);r.ln=119;{r.ln=121;l.gW("BPFPORTAL").getVIEWSPANEL().mthSETWAITINGSTATE("OFF");r.ln=122;l.gW("BPFPORTAL").mthSHOWTOASTER(m.STRINGS.getTEXT("MESSAGE.ONSETACCOUNTDETAILSFAILED"),7500);}r.ln=124;r.e();};function e7(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#SaveAction.Click",127);r.ln=127;
{r.ln=129;if(this.mthCHECKDATAISVALID()){r.ln=132;l.gW("BPFPORTAL").getVIEWSPANEL().mthSETWAITINGSTATE("ON");r.ln=134;m.CURRENTUSER.mthSETACCOUNTDETAILS(m.USEREMAILEDIT.get(),m.FIRSTNAMEEDIT.get(),m.LASTNAMEEDIT.get());}}r.ln=138;r.e();};function e8(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#UserEmailEdit.Changed",141);r.ln=141;{r.ln=144;if(l.s.IsValidEmail(m.USEREMAILEDIT.getValue())){r.ln=146;m.ACCOUNTCHECKDELAY.mthSTOP();r.ln=147;m.ACCOUNTCHECKDELAY.mthSTART();}else{r.ln=151;m.USEREMAILEDIT.setHelperColor("");
r.ln=152;m.USEREMAILEDIT.setHelperText(m.USEREMAILEDIT.getComponentTag());}}r.ln=156;r.e();};function e9(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#AccountCheckDelay.Tick",158);r.ln=158;{r.ln=160;m.ACCOUNTCHECKDELAY.mthSTOP();r.ln=161;this.mthHANDLECHECKEMAIL();}r.ln=163;r.e();};cO.mthSETSTRINGS=function(){var m=this.REF,r=l.mR(this,cO,"SetStrings",168);r.ln=168;{r.ln=170;m.PANELHEADING.setCaption(m.STRINGS.getTEXT("PANELHEADING.CAPTION"));r.ln=171;m.INSTRUCTIONTEXT.setCaption(m.STRINGS.getTEXT("INSTRUCTIONTEXT.CAPTION"));
r.ln=173;m.ACCOUNTDETAILSPANELHEADING.setCaption(m.STRINGS.getTEXT("ACCOUNTDETAILSPANELHEADING.CAPTION"));r.ln=174;m.USEREMAILEDIT.setCaption(m.STRINGS.getTEXT("USEREMAILEDIT.CAPTION"));r.ln=175;m.FIRSTNAMEEDIT.setCaption(m.STRINGS.getTEXT("FIRSTNAMEEDIT.CAPTION"));r.ln=176;m.LASTNAMEEDIT.setCaption(m.STRINGS.getTEXT("LASTNAMEEDIT.CAPTION"));r.ln=178;m.SAVEACTION.setCaption(m.STRINGS.getTEXT("SAVEACTION.CAPTION"));}r.ln=180;r.e();};cO.mthPOPULATE=function(){var m=this.REF,r=l.mR(this,cO,"Populate",183);
r.ln=183;{r.ln=186;m.USEREMAILEDIT.set(m.CURRENTUSER.getEMAILADRESS());r.ln=187;m.FIRSTNAMEEDIT.set(m.CURRENTUSER.getFIRSTNAME());r.ln=188;m.LASTNAMEEDIT.set(m.CURRENTUSER.getLASTNAME());}r.ln=190;r.e();};cO.mthHANDLECHECKEMAIL=function(){var m=this.REF,r=l.mR(this,cO,"HandleCheckEmail",193);r.ln=193;{r.ln=195;if(l.s.ne(m.CURRENTUSER.getEMAILADRESS(),m.USEREMAILEDIT.get())){r.ln=197;m.SESSION.ref.mthCHECKFORACCOUNT(m.USEREMAILEDIT.get());}}r.ln=201;r.e();};cO.mthHANDLEACCOUNTEXISTS=function(p0){var m=this.REF,r=l.mR(this,cO,"HandleAccountExists",203);
var P0=r.cP("EXISTS","PRIM_BOLN");P0.set(p0);r.ln=203;{r.ln=206;m.ACCOUNTINUSE.set(P0.get());r.ln=208;if(l.tB(m.ACCOUNTINUSE.get())){r.ln=210;m.USEREMAILEDIT.mthSHOWERROR(m.STRINGS.getTEXT("USEREMAILEDIT.INUSE.ERROR"));}else{r.ln=214;m.USEREMAILEDIT.mthCLEARERROR();r.ln=215;m.USEREMAILEDIT.setHelperColor("ThemeSuccessMedium");r.ln=216;m.USEREMAILEDIT.setHelperText(m.STRINGS.getTEXT("USEREMAILEDIT.INUSE.OKAY"));}}r.ln=220;r.e();};cO.mthCHECKDATAISVALID=function(){var m=this.REF,r=l.mR(this,cO,"CheckDataIsValid",223);
var P0=r.cP("RESULT","PRIM_BOLN");r.ln=223;{r.ln=227;P0.set(true);r.ln=228;this.mthCLEARALLERRORS();r.ln=231;if(l.s.IsNull(m.FIRSTNAMEEDIT.getValue())){r.ln=233;m.FIRSTNAMEEDIT.mthSHOWERROR(m.STRINGS.getTEXT("FIRSTNAMEEDIT.ERROR"));}r.ln=238;if(l.s.IsNull(m.LASTNAMEEDIT.getValue())){r.ln=240;m.LASTNAMEEDIT.mthSHOWERROR(m.STRINGS.getTEXT("LASTNAMEEDIT.ERROR"));}r.ln=245;if(l.s.IsNull(m.USEREMAILEDIT.getValue())){r.ln=247;m.USEREMAILEDIT.mthSHOWERROR(m.STRINGS.getTEXT("USEREMAILEDIT.ENTRY.ERROR"));
}else{r.ln=251;if(l.b.IsFalse(l.s.IsValidEmail(m.USEREMAILEDIT.getValue()))){r.ln=253;m.USEREMAILEDIT.mthSHOWERROR(m.STRINGS.getTEXT("USEREMAILEDIT.VALID.ERROR"));}else{r.ln=257;if(l.tB(m.ACCOUNTINUSE.get())){r.ln=259;m.USEREMAILEDIT.mthSHOWERROR(m.STRINGS.getTEXT("USEREMAILEDIT.INUSE.ERROR"));}}}r.ln=268;{var l1=m.ACCOUNTDETAILSENTRYPANEL.getComponentControls().cI();while(l1.step()){var CONTROL=r.sR("CONTROL",l1.item());if(l.nIo(CONTROL,"PRIM_MD.Edit")){continue;}r.ln=270;if(CONTROL.getHasError())
{r.ln=272;P0.set(false);l1.end();return r.rV(P0.get());}r.ln=277;}l1.end();r.dR("CONTROL");}}r.ln=279;return r.rV(P0.get());};cO.mthCLEARALLERRORS=function(){var m=this.REF,r=l.mR(this,cO,"ClearAllErrors",281);r.ln=281;{r.ln=284;{var l1=m.ACCOUNTDETAILSENTRYPANEL.getComponentControls().cI();while(l1.step()){var CONTROL=r.sR("CONTROL",l1.item());if(l.nIo(CONTROL,"PRIM_MD.Edit")){continue;}r.ln=286;if(CONTROL.getHasError()){r.ln=288;CONTROL.mthCLEARERROR();}r.ln=292;}l1.end();r.dR("CONTROL");}}r.ln=294;
r.e();};cO.setrefCURRENTUSER=function(rn){if(this.REF.CURRENTUSER!=null){this.REF.CURRENTUSER.rH("ONSETACCOUNTDETAILSCOMPLETED",this,e5);this.REF.CURRENTUSER.rH("ONSETACCOUNTDETAILSFAILED",this,e6);}this.sR("CURRENTUSER",rn);if(this.REF.CURRENTUSER!=null){this.REF.CURRENTUSER.aH("ONSETACCOUNTDETAILSCOMPLETED",this,e5);this.REF.CURRENTUSER.aH("ONSETACCOUNTDETAILSFAILED",this,e6);}};},{rc:["BPFAPP002","BPFAPP001","BPFVLR050"],rp:["PRIM_VIEW","PRIM_VS.Style","PRIM_TBLO","PRIM_TBLO.Column","PRIM_TBLO.Row","PRIM_TBLO.Item","PRIM_MD.Label","PRIM_PANL","PRIM_MD.Edit","PRIM_MD.FlatButton","PRIM_BOLN","PRIM_TIMR"],
dc:["BPFCLS002"]});