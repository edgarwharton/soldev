LANSA.addComponent({id:"BPFAPP010",nm:"BPFClientTabManager",ot:"rp",tp:"Reusable Part",pt:"ap",de:"Portal Client Tab Manager",tl:15000300},function(l,oI,u){var cL="ENG";var c1=l.cDA("1970-01-01");var Fd={F1:{nm:"BPFFLD061",an:"BPFGenericDateTime",ft:"DT",ln:26,dc:0,lb:"Generic Date Ti",h1:"Generic",h2:"Date",h3:"Time",de:"Generic Date Time",dv:l.SqlNull,ia:["ASQN","ISO","SUTC"]},F2:{nm:"STD_INT",ft:"I",ln:4,dc:0,ec:"J",lb:"Std Integer",h1:"Standard",h2:"Integer",h3:"Field",de:"Standard Integer field",
dv:0,ia:["FE","RB"]}};var cO=l.rC(oI,{an:"PRIM_OBJT",fd:Fd,rm:["dt"],pt:{InactivityTimeout:{da:"rw"},ClientID:{da:"r"},IsLastTab:{da:"na"}},mt:{RegisterTab:{ps:{"TimeoutInSeconds":{pt:"i"}}},DeregisterTab:{},SetTabInActive:{},SetTabActive:{}},co:function(){cO.aN.call(this);this.aF("BPFAPP010",Fd);var C0=this.cA("NAVIGATE","BPFAPP001");var C1=this.cA("BROWSER","BPFWGT001");var C2=this.cR("LASTACTIONTIMEOUT","PRIM_NMBR");var C3=this.cR("TABCLIENTID","PRIM_ALPH");var C4=this.cR("SUPPORTED","PRIM_BOLN");
var C5=this.cR("OTHERCLIENTSEXIST","PRIM_BOLN");if((C0!=null)&&(C0.iI()==false)){C0.iC();}if((C1!=null)&&(C1.iI()==false)){C1.iC();}C2.iC();C3.iC();C4.iC();C5.iC();C0.aH("ONNAVIGATIONEVENT",this,e2);this.aH("CREATEINSTANCE",this,e1);}});cO.mthGETISLASTTAB=function(){var m=this.REF,r=l.pR(this,cO,"GetIsLastTab",34);var P0=r.cP("PROPERTY","PRIM_BOLN");r.ln=34;{r.ln=38;P0.set(true);r.ln=41;if(l.b.IsFalse(m.SUPPORTED.get())){return r.rV(P0.get());}r.ln=45;{var l1=l.WEB().getLocalStorage().cI();while(l1.step())
{var BPFSTORAGEITEM=r.sR("BPFSTORAGEITEM",l1.item());r.ln=47;if(l.b.IsFalse(l.s.Contains(BPFSTORAGEITEM.getName(),"BPF.CLIENT."))){continue;}r.ln=50;P0.set(false);r.ln=52;break;r.ln=54;}l1.end();r.dR("BPFSTORAGEITEM");}}r.ln=56;return r.rV(P0.get());};function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#COM_OWNER.CreateInstance",59);r.ln=59;{r.ln=61;m.SUPPORTED.set((l.b.IsFalse(m.BROWSER.ref.getISAPPLESAFARI())&&l.b.IsFalse(m.BROWSER.ref.getISOLDEDGE())));}r.ln=63;r.e();};function e2(sender,Ps)
{var f=this.FLD.BPFAPP010,m=this.REF,r=l.eR(this,cO,"#Navigate.OnNavigationEvent",65);var P0=Ps.r("GROUP");r.ln=65;{r.ln=68;if(l.b.IsFalse(m.SUPPORTED.get())){r.e();return;}r.ln=72;if(l.tB(l.s.eq(P0.get(),"VIEWS"))){r.ln=74;l.WEB().getLocalStorage().mthADD("BPF.LAST.ACTION",l.dt.AsDisplayString(l.dt.Now(f.F1.get()),"CCYYMMDDHHMMSS"));}}r.ln=78;r.e();};cO.mthREGISTERTAB=function(p0){var f=this.FLD.BPFAPP010,m=this.REF,r=l.mR(this,cO,"RegisterTab",81);var P0=r.cP("TIMEOUTINSECONDS","PRIM_NMBR");P0.set((p0===u)?(3000):(p0));
var C0=r.cR("NOW","PRIM_DAT");var C1=r.cR("THEN","PRIM_DAT");C0.iC();C1.iC();r.ln=81;{r.ln=91;if(l.b.IsFalse(m.SUPPORTED.get())){r.e();return;}r.ln=96;l.WEB().getSessionStorage().mthREMOVE("BPF.CLIENT.ID");r.ln=97;m.TABCLIENTID.set(l.n.AsString(l.dt.AsSeconds(l.dt.AsLocalizedDateTime(l.dt.Now(f.F1.get())))));r.ln=98;l.WEB().getSessionStorage().mthADD("BPF.CLIENT.ID",m.TABCLIENTID.get());r.ln=101;m.LASTACTIONTIMEOUT.set(P0.get());r.ln=104;if((l.WEB().getLocalStorage().get("BPF.LAST.ACTION")!=null))
{r.ln=107;C1.set(l.s.AsDateTime(l.WEB().getLocalStorage().get("BPF.LAST.ACTION").getValue(),"CCYYMMDDHHMMSS"));r.ln=108;C0.set(l.dt.Now(f.F1.get()));r.ln=111;f.F2.set(l.sub(l.zap(l.add(l.zap(l.mul32(l.d.Difference(l.dt.Date(C0.get()),c1),86400),10,0),l.t.AsSeconds(l.dt.Time(l.dt.Now(C0.get())))),10,0),l.zap(l.add(l.zap(l.mul32(l.d.Difference(l.dt.Date(C1.get()),c1),86400),10,0),l.t.AsSeconds(l.dt.Time(C1.get()))),10,0)));r.ln=114;if(l.tB(l.n.ge(f.F2.get(),m.LASTACTIONTIMEOUT.get()))){r.ln=117;l.WEB().getLocalStorage().mthADD("BPF.LAST.ACTION",l.dt.AsDisplayString(l.dt.Now(f.F1.get()),"CCYYMMDDHHMMSS"));
r.ln=120;{var l1=l.WEB().getLocalStorage().cI();while(l1.step()){var KEY=r.sR("KEY",l1.item());r.ln=123;if((l.s.Contains(KEY.getName(),"BPF.CLIENT.")&&l.b.IsFalse(l.s.IsNull(KEY.getValue())))){r.ln=126;l.WEB().getLocalStorage().mthREMOVE(KEY.getName());}r.ln=130;}l1.end();r.dR("KEY");}}}r.ln=137;l.WEB().getLocalStorage().mthADD(l.cat("BPF.CLIENT.",m.TABCLIENTID.get()),"");}r.ln=139;r.e();};cO.mthDEREGISTERTAB=function(){var m=this.REF,r=l.mR(this,cO,"DeregisterTab",141);r.ln=141;{r.ln=144;if(l.b.IsFalse(m.SUPPORTED.get()))
{r.e();return;}r.ln=149;l.WEB().getLocalStorage().mthREMOVE(l.cat("BPF.CLIENT.",m.TABCLIENTID.get()));}r.ln=151;r.e();};cO.mthSETTABINACTIVE=function(){var m=this.REF,r=l.mR(this,cO,"SetTabInActive",153);r.ln=153;{r.ln=156;if(l.b.IsFalse(m.SUPPORTED.get())){r.e();return;}r.ln=160;l.WEB().getLocalStorage().mthADD(l.cat("BPF.CLIENT.",m.TABCLIENTID.get()),"");}r.ln=162;r.e();};cO.mthSETTABACTIVE=function(){var m=this.REF,r=l.mR(this,cO,"SetTabActive",164);r.ln=164;{r.ln=167;if(l.b.IsFalse(m.SUPPORTED.get()))
{r.e();return;}r.ln=171;l.WEB().getLocalStorage().mthADD(l.cat("BPF.CLIENT.",m.TABCLIENTID.get()),m.TABCLIENTID.get());}r.ln=173;r.e();};cO.getINACTIVITYTIMEOUT=function(){return this.REF.LASTACTIONTIMEOUT.get();};cO.setINACTIVITYTIMEOUT=function(v){this.REF.LASTACTIONTIMEOUT.set(v);};cO.getCLIENTID=function(){return this.REF.TABCLIENTID.get();};cO.getISLASTTAB=function(){return this.mthGETISLASTTAB();};},{rc:["BPFAPP001","BPFWGT001"],rp:["PRIM_OBJT","PRIM_NMBR","PRIM_ALPH","PRIM_BOLN","PRIM_DTIM","PRIM_FLD"],
dp:["PRIM_DAT"]});