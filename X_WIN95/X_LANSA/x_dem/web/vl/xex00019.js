LANSA.addComponent({id:"XEX00019",nm:"XDemoUserAccountClient",ot:"rp",tp:"Reusable Part",de:"[pkg-ex-integration-lib]",tl:14020401},function(l,oI,u){var cO=l.rC(oI,{an:"PRIM_OBJT",mt:{Login:{ps:{"Username":{pt:"i"},"Password":{pt:"i"},"Token":{pt:"i"}}},EndServerSession:{},FinalizeOAuth2Login:{},GetOAuth2RedirectUrl:{},GetUserInfoFromClientToken:{ps:{"PrimaryEmail":{pt:"o"},"FirstName":{pt:"o"},"Surname":{pt:"o"},"ClientToken":{pt:"i"}}},RegisterUser:{ps:{"PrimaryEmail":{pt:"i"},"FirstName":{pt:"i"
},"Surname":{pt:"i"},"Password":{pt:"i"},"MultiFA":{pt:"i"},"MobileNo":{pt:"i"}}},RegisterUserWithIdProvider:{ps:{"FirstName":{pt:"i"},"Surname":{pt:"i"},"ClientToken":{pt:"i"}}},RegisterUserImpl:{ps:{"PrimaryEmail":{pt:"i"},"FirstName":{pt:"i"},"Surname":{pt:"i"},"Password":{pt:"i"},"MultiFA":{pt:"i"},"MobileNo":{pt:"i"},"ClientToken":{pt:"i"}}}},ev:{LoginCompleted:{ps:{"Status":{pt:"i"},"ErrorCode":{pt:"i"},"ErrorMessage":{pt:"i"}}},OAuth2LoginCompleted:{ps:{"Status":{pt:"i"},"ClientAuthToken":
{pt:"i"},"AdditionalState":{pt:"i"},"ErrorCode":{pt:"i"},"ErrorMessage":{pt:"i"}}},RegisterUserCompleted:{ps:{"Status":{pt:"i"}}}},co:function(){cO.aN.call(this);var C0=this.cR("GREDIRECTURL","PRIM_DC","UnicodeString");C0.iC();}});cO.mthLOGIN=function(p0,p1,p2){var r=l.mR(this,cO,"Login",21),mth=r;var P0=r.cP("USERNAME","PRIM_DC","UnicodeString");var P1=r.cP("PASSWORD","PRIM_DC","UnicodeString");var P2=r.cP("TOKEN","PRIM_DC","UnicodeString");P0.set(p0);P1.set(p1);P2.set((p2===u)?(""):(p2));var C0=r.cR("STATUS","PRIM_DC","UnicodeString");
var C1=r.cR("ERRORCODE","PRIM_DC","UnicodeString");var C2=r.cR("ERRORMESSAGE","PRIM_DC","UnicodeString");var C3=r.cDR("LOGINSERVICE","XEX00002","LOGIN");C0.iC();C1.iC();C2.iC();C3.iC();C3.aH("COMPLETED",this,e1);r.ln=21;{r.ln=31;C3.mthEXECUTEASYNC({FLD:{"FLD_USERNAME":P0.get(),"FLD_PASSWORD":P1.get(),"FLD_TOTP":P2.get()}},{FLD:{"FLD_STATUS":C0,"FLD_ERRORCODE":C1,"FLD_ERRORMESSAGE":C2}});}r.ln=36;r.e();function e1(sender,Ps){var r=l.eR(this,cO,"#LoginService.Completed",33,mth);r.ln=33;{r.ln=34;{var eP=l.ePs();
eP.cR("STATUS","PRIM_DC","UnicodeString");eP.cR("ERRORCODE","PRIM_DC","UnicodeString");eP.cR("ERRORMESSAGE","PRIM_DC","UnicodeString");eP.r("STATUS").set(C0.get());eP.r("ERRORCODE").set(C1.get());eP.r("ERRORMESSAGE").set(C2.get());this.fE("LOGINCOMPLETED",eP);eP.e();}}r.ln=35;r.e();}};cO.mthENDSERVERSESSION=function(){var r=l.mR(this,cO,"EndServerSession",38);var C0=r.cDR("SERVICE","XEX00002","ENDWEBSESSION");C0.iC();r.ln=38;{r.ln=41;C0.mthEXECUTE({},{});}r.ln=42;r.e();};cO.mthFINALIZEOAUTH2LOGIN=function()
{var r=l.mR(this,cO,"FinalizeOAuth2Login",44),mth=r;var C0=r.cD("C0");var C1=r.cR("CALLBACKDATA","PRIM_DC","UnicodeString");var C2=r.cR("AUTHORIZATIONCODE","PRIM_DC","UnicodeString");var C3=r.cD("C3");var C4=r.cDR("INVOKECALLBACK","XEX00002","COMPLETEOAUTH2LOGIN");var C5=r.cR("STATUS","PRIM_DC","UnicodeString");var C6=r.cR("ERRORMESSAGE","PRIM_DC","UnicodeString");var C7=r.cR("ERRORCODE","PRIM_DC","UnicodeString");var C8=r.cR("ADDITIONALSTATE","PRIM_DC","UnicodeString");var C9=r.cR("CLIENTAUTHTOKEN","PRIM_DC","UnicodeString");
C1.iC();C2.iC();C4.iC();C5.iC();C6.iC();C7.iC();C8.iC();C9.iC();C4.aH("COMPLETED",this,e2);r.ln=44;{r.ln=57;C0=r.sR("C0",l.WEB().getURLParameters().get("state"));r.ln=58;if((C0!=null)){r.ln=59;C1.set(C0.getValue());r.ln=62;C3=r.sR("C3",l.WEB().getURLParameters().get("code"));r.ln=65;if((C3!=null)){r.ln=66;C2.set(C3.getValue());}r.ln=69;C4.mthEXECUTEASYNC({FLD:{"FLD_OAUTH2AUTHORIZATIONCODE":C2.get(),"FLD_OAUTH2CALLBACKDATA":C1.get(),"FLD_OAUTH2REDIRECTURL":this.mthGETOAUTH2REDIRECTURL()}},{FLD:{"FLD_STATUS":C5,"FLD_ERRORMESSAGE":C6,"FLD_ERRORCODE":C7,"FLD_CLIENTAUTHTOKEN":C9,"FLD_ADDITIONALSTATE":C8}});
}}r.ln=76;r.e();function e2(sender,Ps){var r=l.eR(this,cO,"#InvokeCallback.Completed",72,mth);r.ln=72;{r.ln=73;{var eP=l.ePs();eP.cR("STATUS","PRIM_DC","UnicodeString");eP.cR("CLIENTAUTHTOKEN","PRIM_DC","UnicodeString");eP.cR("ADDITIONALSTATE","PRIM_DC","UnicodeString");eP.cR("ERRORCODE","PRIM_DC","UnicodeString");eP.cR("ERRORMESSAGE","PRIM_DC","UnicodeString");eP.r("STATUS").set(C5.get());eP.r("CLIENTAUTHTOKEN").set(C9.get());eP.r("ADDITIONALSTATE").set(C8.get());eP.r("ERRORCODE").set(C7.get());
eP.r("ERRORMESSAGE").set(C6.get());this.fE("OAUTH2LOGINCOMPLETED",eP);eP.e();}}r.ln=74;r.e();}};cO.mthGETOAUTH2REDIRECTURL=function(){var r=l.mR(this,cO,"GetOAuth2RedirectUrl",78);var P0=r.cP("RESULT","PRIM_DC","UnicodeString");var C0=r.cR("CURRENTURL","XLBA0040");C0.iC();r.ln=78;{r.ln=83;P0.set(l.cat(C0.getORIGIN(),C0.getPATH()));}r.ln=84;return r.rV(P0.get());};cO.mthGETUSERINFOFROMCLIENTTOKEN=function(p0,p1,p2,p3){var r=l.mR(this,cO,"GetUserInfoFromClientToken",86);var P0=r.cP("PRIMARYEMAIL","PRIM_DC","UnicodeString");
var P1=r.cP("FIRSTNAME","PRIM_DC","UnicodeString");var P2=r.cP("SURNAME","PRIM_DC","UnicodeString");var P3=r.cP("CLIENTTOKEN","PRIM_DC","UnicodeString");P0.set("");P1.set("");P2.set("");P3.set(p3);var C0=r.cR("JSON","PRIM_WEB","Json");C0.iC();r.ln=86;{r.ln=94;C0.set(P3.get());r.ln=95;P0.set(C0.getRootItem().get("user").mthASSTRING());r.ln=96;P1.set(C0.getRootItem().get("firstName").mthASSTRING());r.ln=97;P2.set(C0.getRootItem().get("surname").mthASSTRING());if(p0!==u){p0.set(P0.get());}if(p1!==u)
{p1.set(P1.get());}if(p2!==u){p2.set(P2.get());}}r.ln=98;r.e();};cO.mthREGISTERUSER=function(p0,p1,p2,p3,p4,p5){var r=l.mR(this,cO,"RegisterUser",100);var P0=r.cP("PRIMARYEMAIL","PRIM_DC","UnicodeString");var P1=r.cP("FIRSTNAME","PRIM_DC","UnicodeString");var P2=r.cP("SURNAME","PRIM_DC","UnicodeString");var P3=r.cP("PASSWORD","PRIM_DC","UnicodeString");var P4=r.cP("MULTIFA","PRIM_DC","UnicodeString");var P5=r.cP("MOBILENO","PRIM_DC","UnicodeString");P0.set(p0);P1.set(p1);P2.set(p2);P3.set(p3);P4.set(p4);
P5.set((p5===u)?(""):(p5));r.ln=100;{r.ln=108;this.mthREGISTERUSERIMPL(P0.get(),P1.get(),P2.get(),P3.get(),P4.get(),P5.get(),"");}r.ln=109;r.e();};cO.mthREGISTERUSERWITHIDPROVIDER=function(p0,p1,p2){var r=l.mR(this,cO,"RegisterUserWithIdProvider",111);var P0=r.cP("FIRSTNAME","PRIM_DC","UnicodeString");var P1=r.cP("SURNAME","PRIM_DC","UnicodeString");var P2=r.cP("CLIENTTOKEN","PRIM_DC","UnicodeString");P0.set(p0);P1.set(p1);P2.set(p2);r.ln=111;{r.ln=116;this.mthREGISTERUSERIMPL("",P0.get(),P1.get(),"","","",P2.get());
}r.ln=117;r.e();};cO.mthREGISTERUSERIMPL=function(p0,p1,p2,p3,p4,p5,p6){var r=l.mR(this,cO,"RegisterUserImpl",119),mth=r;var P0=r.cP("PRIMARYEMAIL","PRIM_DC","UnicodeString");var P1=r.cP("FIRSTNAME","PRIM_DC","UnicodeString");var P2=r.cP("SURNAME","PRIM_DC","UnicodeString");var P3=r.cP("PASSWORD","PRIM_DC","UnicodeString");var P4=r.cP("MULTIFA","PRIM_DC","UnicodeString");var P5=r.cP("MOBILENO","PRIM_DC","UnicodeString");var P6=r.cP("CLIENTTOKEN","PRIM_DC","UnicodeString");P0.set(p0);P1.set(p1);P2.set(p2);
P3.set(p3);P4.set(p4);P5.set(p5);P6.set(p6);var C0=r.cR("STATUS","PRIM_ALPH");var C1=r.cDR("SRV","XEX00002","REGISTERUSER");C0.iC();C1.iC();C1.aH("COMPLETED",this,e3);r.ln=119;{r.ln=131;C1.mthEXECUTEASYNC({FLD:{"FLD_CLIENTAUTHTOKEN":P6.get(),"FLD_EMAIL":P0.get(),"FLD_FIRSTNAME":P1.get(),"FLD_PASSWORD":P3.get(),"FLD_SURNAME":P2.get(),"FLD_MOBILENO":P5.get(),"FLD_MULTIFA":P4.get()}},{FLD:{"FLD_STATUS":C0}});}r.ln=137;r.e();function e3(sender,Ps){var r=l.eR(this,cO,"#Srv.Completed",133,mth);r.ln=133;
{r.ln=134;{var eP=l.ePs();eP.cR("STATUS","PRIM_DC","UnicodeString");eP.r("STATUS").set(C0.get());this.fE("REGISTERUSERCOMPLETED",eP);eP.e();}}r.ln=135;r.e();}};},{rp:["PRIM_OBJT","PRIM_DC.UnicodeString","PRIM_WEB.DataRequest"],dc:["XLBA0040"],dp:["PRIM_DC.UnicodeString","PRIM_WEB.URLParameter","PRIM_WEB.Json","PRIM_ALPH"]});