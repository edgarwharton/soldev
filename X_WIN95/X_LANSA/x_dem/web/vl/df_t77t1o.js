LANSA.addComponent({id:"DF_T77T1O",ot:"wp",tp:"Web Page",pt:"ap",de:"Test Kerberos",tl:15000000},function(l,oI,u){var cL="ENG";if((l.gCL()=="FRA")||(l.gCL()=="JPN")){cL=l.gCL();}var Fd={F1:{nm:"STD_STRNG",ft:"VC",ln:512,dc:0,lb:{"ENG":"Std string fld","FRA":"?","JPN":"?"}[cL],h1:{"ENG":"Standard","FRA":"?","JPN":"?"}[cL],h2:{"ENG":"String","FRA":"?","JPN":"?"}[cL],h3:{"ENG":"Field","FRA":"?","JPN":"?"}[cL],de:{"ENG":"Standard string field","FRA":"?","JPN":"?"}[cL],dv:"",ia:["FE"]},F2:{nm:"XSURNAME",
an:"xEmployeeSurname",ft:"N",ln:40,dc:0,lb:{"ENG":"Surname","FRA":"Nom","JPN":"姓"}[cL],h1:{"ENG":"Employee","FRA":"Nom","JPN":"社員"}[cL],h2:{"ENG":"Surname","FRA":"Employé","JPN":"姓"}[cL],h3:" ",de:{"ENG":"Surname","FRA":"Nom","JPN":"姓"}[cL],dv:"",ia:["FE","LC"]},F3:{nm:"XGIVENAME",an:"xEmployeeGivenNames",ft:"N",ln:40,dc:0,lb:{"ENG":"Given Names","FRA":"Prénoms","JPN":"名前"}[cL],h1:{"ENG":"Employee","FRA":"Prénoms","JPN":"社員"}[cL],h2:{"ENG":"Given","FRA":"Employé","JPN":"ファースト"}[cL],h3:{"ENG":"Names","FRA":" ","JPN":"ネーム"}[cL],
de:{"ENG":"Given Names","FRA":"Prénoms","JPN":"ファーストネーム"}[cL],dv:"",ia:["FE","LC"]},F4:{nm:"LISTCOUNT",ft:"P",ln:7,dc:0,ec:"J",lb:{"ENG":"Entries .......","FRA":"Entrées . . . .","JPN":"?"}[cL],h1:{"ENG":"Number","FRA":"Nombre","JPN":"?"}[cL],h2:{"ENG":"of Entrys","FRA":"d´entrées","JPN":"?"}[cL],h3:"",de:{"ENG":"Number of entries in a browse list","FRA":"Nombre d´entrées dans une browse list","JPN":"?"}[cL],dv:0,ia:["FE","RB"]},F5:{nm:"XEMPLOYID",an:"xEmployeeIdentification",ft:"A",ln:10,dc:0,lb:{"ENG":"Employee Id","FRA":"Id employé","JPN":"社員 ID"}[cL],
h1:{"ENG":"Employee","FRA":"Identification","JPN":"社員"}[cL],h2:{"ENG":"Identification","FRA":"Employé","JPN":"ID"}[cL],h3:" ",de:{"ENG":"Identification","FRA":"Identification","JPN":"身分証明"}[cL],dv:"",ia:["FE"]},F6:{nm:"XSTATE",an:"xEmployeeState",ft:"N",ln:40,dc:0,lb:{"ENG":"State","FRA":"Etat","JPN":"州"}[cL],h1:{"ENG":"State","FRA":"Etat","JPN":"州"}[cL],h2:" ",h3:" ",de:{"ENG":"State","FRA":"Etat","JPN":"州"}[cL],dv:"",ia:["FE","LC"]},F7:{nm:"XSALARY",an:"xEmployeeSalary",ft:"P",ln:15,dc:2,ec:"1",
lb:{"ENG":"Annual Salary","FRA":"Salaire annuel","JPN":"年収"}[cL],h1:{"ENG":"Annual","FRA":"Salaire","JPN":"年収"}[cL],h2:{"ENG":"Salary","FRA":"Annuel","JPN":" "}[cL],h3:" ",de:{"ENG":"Annual Salary","FRA":"Salaire annuel","JPN":"年収"}[cL],dv:0,ia:["FE","RB"]},F8:{nm:"XSTARTDTE",an:"xEmployeeStartDate",ft:"D",ln:10,dc:0,lb:{"ENG":"Start Date","FRA":"Date Embauche","JPN":"開始日"}[cL],h1:{"ENG":"Start","FRA":"Date","JPN":"開始"}[cL],h2:{"ENG":"Date","FRA":"Embauche","JPN":"日付"}[cL],h3:" ",de:{"ENG":"Start Date","FRA":"Date d'Embauche","JPN":"開始日"}[cL],
dv:l.SqlNull,ia:["FE","ASQN"]},F9:{nm:"WRKUSER",ft:"C",ln:512,dc:0,lb:"wrkUser",h1:"wrkUser",h2:"",h3:"",de:"wrkUser",dv:""},F10:{nm:"WRKTOKEN",ft:"C",ln:512,dc:0,lb:"wrkToken",h1:"wrkToken",h2:"",h3:"",de:"wrkToken",dv:""},F11:{nm:"USTATUS",ft:"A",ln:2,dc:0,lb:"uStatus",h1:"uStatus",h2:"",h3:"",de:"uStatus",dv:""},F12:{nm:"UERROR",ft:"A",ln:256,dc:0,lb:"uError",h1:"uError",h2:"",h3:"",de:"uError",dv:""},F13:{nm:"USEDTOKENHEX",ft:"A",ln:64,dc:0,lb:"UsedTokenHex",h1:"UsedTokenHex",h2:"",h3:"",de:"UsedTokenHex",
dv:""}};var cO=l.rC(oI,{an:"PRIM_WEB",fd:Fd,mt:{GetToken:{},Usetoken:{}},co:function(){cO.aN.call(this);var f=this.aF("DF_T77T1O",Fd);var C0=this.cR("BUTTON","PRIM_MD","RaisedButton");var C1=this.cR("TEXT_USER","PRIM_MD","Label");var C2=this.cR("TEXT_TOKEN","PRIM_MD","Label");var C3=this.cF("TOKEN_BASE64",Fd.F1.EDITFIELD);var C4=this.cF("TOKEN_HEX",Fd.F1.EDITFIELD);var C5=this.cR("BUTTON1","PRIM_MD","RaisedButton");var C6=this.cF("VALIDATORURL",Fd.F1.EDITFIELD);var C7=this.cR("TEXT","PRIM_MD","Label");
var C8=this.cR("TEXT1","PRIM_MD","Label");var C9=this.cR("DF_T77WJO","DF_T77WJO");C0.setCaption("Request an IBMi Token for this user");C0.setDisplayPosition(2);C0.setLeft(24);C0.setParent(this);C0.setTabPosition(2);C0.setTop(192);C0.setWidth(241);C0.iC();C1.setCaption("User");C1.setDisplayPosition(1);C1.setLeft(24);C1.setParent(this);C1.setTabPosition(1);C1.setTop(464);C1.setWidth(521);C1.iC();C2.setCaption("Token");C2.setDisplayPosition(3);C2.setLeft(24);C2.setParent(this);C2.setTabPosition(3);C2.setTop(504);
C2.setWidth(473);C2.iC();C3.setDisplayPosition(4);C3.setLeft(24);C3.setParent(this);C3.setTabPosition(4);C3.setTop(248);C3.setWidth(817);C3.setCaption("Base 64 version of the token from integrator");C3.setCaptionType("CAPTION");C3.aD();C3.iC();C4.setDisplayPosition(5);C4.setLeft(24);C4.setParent(this);C4.setTabPosition(5);C4.setTop(376);C4.setWidth(713);C4.setCaption("Token as Hex");C4.setCaptionType("CAPTION");C4.aD();C4.iC();C5.setCaption("Validate Token on the IBMi server");C5.setDisplayPosition(6);
C5.setLeft(24);C5.setParent(this);C5.setTabPosition(6);C5.setTop(320);C5.setWidth(233);C5.iC();C6.setDisplayPosition(7);C6.setLeft(24);C6.setParent(this);C6.setTabPosition(7);C6.setTop(112);C6.setWidth(738);C6.setCaptionType("CAPTION");C6.setCaption("Kerberos Validator URL");C6.setHint("This is the url that points to lansa integrator on the IBMi. Replace host and port with your values. The port is often 5563");C6.aD();C6.iC();C7.setCaption("Kerberos Tester");C7.setDisplayPosition(8);C7.setHeight(45);
C7.setLeft(216);C7.setParent(this);C7.setTabPosition(8);C7.setThemeDrawStyle("Title");C7.setTop(8);C7.setWidth(377);C7.iC();C8.setCaption("Enter the URL to lansa integrator. This is where the token is requested from ");C8.setDisplayPosition(9);C8.setLeft(24);C8.setParent(this);C8.setTabPosition(9);C8.setThemeDrawStyle("Strong");C8.setTop(69);C8.setWidth(705);C8.iC();C9.iC();C0.aH("CLICK",this,e2);C5.aH("CLICK",this,e4);C9.aH("KERBEROSCOMPLETED",this,e3);this.setTheme(l.THEME().get("MATERIALDESIGNBLUE"));
this.aH("INITIALIZE",this,e1);var li=this.aL("DF_T77T1O");li.ACCESSKEYS=l.cLT({"XSURNAME":f.F2,"XGIVENAME":f.F3},null);li.INSTANCELIST_COLUMNS=l.cLT({"XEMPLOYID":f.F5,"XSURNAME":f.F2,"XGIVENAME":f.F3,"XSTATE":f.F6,"XSALARY":f.F7,"XSTARTDTE":f.F8},f.F4);}});function e1(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#COM_OWNER.Initialize",43);r.ln=43;{r.ln=44;m.VALIDATORURL.set("http://host:port/service/ssoservice.jsp?storetoken=true");}r.ln=45;r.e();};function e2(sender,Ps){var f=this.FLD.DF_T77T1O,r=l.eR(this,cO,"#Button.Click",50);
r.ln=50;{r.ln=51;f.F1.set("");r.ln=52;this.mthGETTOKEN();}r.ln=53;r.e();};cO.mthGETTOKEN=function(){var m=this.REF,r=l.mR(this,cO,"GetToken",55);var C0=r.cR("RESULT","PRIM_ALPH");C0.iC();r.ln=55;{r.ln=58;m.DF_T77WJO.mthZINT_CALLKERBEROS(m.VALIDATORURL.get());}r.ln=60;r.e();};function e3(sender,Ps){var f=this.FLD.DF_T77T1O,m=this.REF,r=l.eR(this,cO,"#DF_T77WJO.KerberosCompleted",62);var P0=Ps.r("STATUS");var P1=Ps.r("RESPONSESTRING");var C0=r.cR("JSON","PRIM_WEB","Json");C0.iC();r.ln=62;{r.ln=65;m.TOKEN_BASE64.set(l.cat(l.cat(P0.get()," "),P1.get()));
r.ln=67;if(l.s.eq(P0.get(),"OK")){r.ln=68;if(l.s.ne(P1.get(),"")){r.ln=72;C0.set(P1.get());r.ln=73;if(C0.getIsValid()){r.ln=74;f.F9.set(C0.getRootItem().get("user").mthASSTRING());r.ln=75;f.F10.set(C0.getRootItem().get("token").mthASSTRING());r.ln=77;m.TOKEN_BASE64.set(l.cat(l.cat(l.cat("IBMi User is ",f.F9.get())," Token "),f.F10.get()));}}}}r.ln=83;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#Button1.Click",85);r.ln=85;{r.ln=86;m.TOKEN_HEX.set("");r.ln=87;this.mthUSETOKEN();}r.ln=88;
r.e();};cO.mthUSETOKEN=function(){var f=this.FLD.DF_T77T1O,m=this.REF,r=l.mR(this,cO,"Usetoken",90),mth=r;var C0=r.cDR("USETOKEN","DF_T77DSO","USETOKEN");C0.iC();C0.aH("COMPLETED",this,e5);C0.aH("FAILED",this,e6);r.ln=90;{r.ln=95;C0.mthEXECUTE({FLD:{"WRKUSER":f.F9.get(),"WRKTOKENBASE64":f.F10.get()}},{FLD:{"WRKUSER":f.F9,"UERROR":f.F12,"USTATUS":f.F11,"WRKTOKENHEX":f.F13}});}r.ln=108;r.e();function e5(sender,Ps){var r=l.eR(this,cO,"#Usetoken.Completed",97,mth);r.ln=97;{r.ln=98;m.TEXT_USER.setCaption(l.cat("IBMi User from the token is: ",f.F9.get()));
r.ln=99;m.TEXT_TOKEN.set(l.cat("Token is: ",f.F10.get()));r.ln=100;l.WEB().mthALERT("Call to server module completed successfully");r.ln=101;m.TOKEN_HEX.set(l.cat(l.cat(l.cat(l.cat("Status: ",f.F11.get())," Token as Hex "),f.F13.get()),f.F12.get()));}r.ln=102;r.e();}function e6(sender,Ps){var r=l.eR(this,cO,"#Usetoken.Failed",104,mth);r.ln=104;{r.ln=105;l.WEB().mthALERT("Call to UseToken failed");}r.ln=106;r.e();}};{Fd.F1.Dc=function(){this.aN.call(this,Fd.F1);};l.cFC({co:Fd.F1.Dc,an:"PRIM_FLD",fn:"STD_STRNG"});
Fd.F1.EDITFIELD=function(){this.aN.call(this,new Fd.F1.Dc());};l.cFC({co:Fd.F1.EDITFIELD,an:"PRIM_MD",at:"EditField",fn:"STD_STRNG",cn:"EditField"});}},{rc:["DF_T77WJO"],rp:["PRIM_WEB","PRIM_MD.RaisedButton","PRIM_MD.Label","PRIM_FLD","PRIM_MD.EditField","PRIM_WEB.DataRequest","PRIM_HINT"],dp:["PRIM_ALPH","PRIM_WEB.Json"]});